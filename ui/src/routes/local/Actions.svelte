<script>
	import ToastModal from '$lib/ToastModal.svelte';

	import toast from 'svelte-french-toast';

	export let handleDraw = async () => {
		await toast.promise(new Promise((r) => setTimeout(r, 3000)), {
			loading: 'ğŸ¤ offering draw...',
			success: 'draw offered!',
			error: 'failed to offer draw'
		});
	};
	export let handleResign = async () => {
		await toast.promise(new Promise((r) => setTimeout(r, 3000)), {
			loading: 'ğŸ¤ resigning...',
			success: 'resigned!',
			error: 'failed to resign'
		});
	};
	export let handleGetState = async () => {
		await toast.promise(new Promise((r) => setTimeout(r, 3000)), {
			loading: 'ğŸ¤ getting state...',
			success: 'state received!',
			error: 'failed to get state'
		});
	};
</script>

<div class="absolute inset-1 overflow-y-scroll flex flex-col justify-start gap-1">
	<button
		class="button flex-1 whitespace-nowrap"
		on:click={() => {
			toast(ToastModal, {
				props: {
					prompt: 'opponent has offered a draw',
					options: [
						{ label: 'ğŸ‘ accept', action: () => toast.success('accepted draw') },
						{ label: 'ğŸ‘ decline', action: () => toast.error('declined draw') }
					]
				},
				duration: Infinity
			});
		}}
	>
		â­test draw
	</button>
	<button class="button flex-1 whitespace-nowrap" on:click={handleDraw}> ğŸ¤ offer draw </button>
	<button class="button flex-1 whitespace-nowrap" on:click={handleResign}> ğŸ˜– resign </button>
	<button class="button flex-1 whitespace-nowrap" on:click={handleGetState}> ğŸ“œ get state </button>
</div>
